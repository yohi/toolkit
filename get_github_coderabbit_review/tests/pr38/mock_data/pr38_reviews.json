[{"id":3237157983,"node_id":"PRR_kwDON9CBJs7A8xxf","user":{"login":"coderabbitai[bot]","id":136622811,"node_id":"BOT_kgDOCCSy2w","avatar_url":"https://avatars.githubusercontent.com/in/347564?v=4","gravatar_id":"","url":"https://api.github.com/users/coderabbitai%5Bbot%5D","html_url":"https://github.com/apps/coderabbitai","followers_url":"https://api.github.com/users/coderabbitai%5Bbot%5D/followers","following_url":"https://api.github.com/users/coderabbitai%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/coderabbitai%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/coderabbitai%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coderabbitai%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/coderabbitai%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/coderabbitai%5Bbot%5D/repos","events_url":"https://api.github.com/users/coderabbitai%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/coderabbitai%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"body":"**Actionable comments posted: 3**\n\n<details>\n<summary>🧹 Nitpick comments (5)</summary><blockquote>\n\n<details>\n<summary>mk/variables.mk (1)</summary><blockquote>\n\n`19-20`: **PHONYに`install-packages-gemini-cli`も追加してください**\n\nヘルプに掲載され、エイリアスも定義されていますが、PHONY未登録です。将来の依存解決の揺れを避けるため明示しておきましょう。\n\n\n\n```diff\n-        fonts-setup fonts-install fonts-install-nerd fonts-install-google fonts-install-japanese fonts-clean fonts-update fonts-list fonts-refresh fonts-debug fonts-backup fonts-configure \\\n-        install-gemini-cli install-packages-ccusage install-ccusage\n+        fonts-setup fonts-install fonts-install-nerd fonts-install-google fonts-install-japanese fonts-clean fonts-update fonts-list fonts-refresh fonts-debug fonts-backup fonts-configure \\\n+        install-gemini-cli install-packages-gemini-cli install-packages-ccusage install-ccusage\n```\n\n</blockquote></details>\n<details>\n<summary>mk/setup.mk (2)</summary><blockquote>\n\n`543-545`: **リンク元の存在チェックを追加してください（壊れたシンボリックリンク防止）**\n\n`ln -sfn`前にソース有無を検証し、欠如時は警告してスキップすると運用が安定します。\n\n\n\n```diff\n-    @ln -sfn $(DOTFILES_DIR)/claude/claude-settings.json $(HOME_DIR)/.claude/settings.json\n+    @if [ -f \"$(DOTFILES_DIR)/claude/claude-settings.json\" ]; then \\\n+        ln -sfn $(DOTFILES_DIR)/claude/claude-settings.json $(HOME_DIR)/.claude/settings.json; \\\n+    else \\\n+        echo \"⚠️  missing: $(DOTFILES_DIR)/claude/claude-settings.json（リンクをスキップ）\"; \\\n+    fi\n@@\n-    @ln -sfn $(DOTFILES_DIR)/claude/CLAUDE.md $(HOME_DIR)/.claude/CLAUDE.md\n+    @if [ -f \"$(DOTFILES_DIR)/claude/CLAUDE.md\" ]; then \\\n+        ln -sfn $(DOTFILES_DIR)/claude/CLAUDE.md $(HOME_DIR)/.claude/CLAUDE.md; \\\n+    else \\\n+        echo \"⚠️  missing: $(DOTFILES_DIR)/claude/CLAUDE.md（リンクをスキップ）\"; \\\n+    fi\n@@\n-    @ln -sfn $(DOTFILES_DIR)/claude/statusline.sh $(HOME_DIR)/.claude/statusline.sh\n+    @if [ -f \"$(DOTFILES_DIR)/claude/statusline.sh\" ]; then \\\n+        ln -sfn $(DOTFILES_DIR)/claude/statusline.sh $(HOME_DIR)/.claude/statusline.sh; \\\n+    else \\\n+        echo \"⚠️  missing: $(DOTFILES_DIR)/claude/statusline.sh（リンクをスキップ）\"; \\\n+    fi\n```\n\n\nAlso applies to: 552-554, 561-563\n\n---\n\n`599-602`: **`setup-config-claude`と`setup-config-lazygit`の二重定義を解消**\n\n上部(行 513–528)にも同名エイリアスがあります。重複は混乱の元なので片方へ集約を。\n\n\n\n```diff\n-# 設定ファイル・コンフィグセットアップ系\n-setup-config-claude: setup-claude\n-setup-config-lazygit: setup-lazygit\n+# （重複定義削除）上部の階層ターゲット群に集約\n```\n\n</blockquote></details>\n<details>\n<summary>mk/help.mk (1)</summary><blockquote>\n\n`27-28`: **ヘルプにエイリアス`install-ccusage`も載せると発見性が上がります**\n\n直接ターゲットを案内したい場合に便利です。\n\n\n```diff\n  @echo \"  make install-packages-playwright      - Playwright E2Eテストフレームワークをインストール\"\n  @echo \"  make install-packages-gemini-cli      - Gemini CLIをインストール\"\n  @echo \"  make install-packages-ccusage         - ccusage (bunx) をインストール\"\n+ @echo \"  make install-ccusage                  - ccusage をインストール（後方互換エイリアス）\"\n```\n\n</blockquote></details>\n<details>\n<summary>mk/install.mk (1)</summary><blockquote>\n\n`1392-1399`: **PATH拡張の変数展開を統一（可搬性）**\n\n`$PATH`より`$$PATH`の方がMakeの二重展開を避けられ、意図どおりにシェル時点で連結されます。\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>📜 Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n**Knowledge base: Disabled due to `Reviews -> Disable Knowledge Base` setting**\n\n<details>\n<summary>📥 Commits</summary>\n\nReviewing files that changed from the base of the PR and between f1886b31cfe6b012690ee4bcf3b80bd98680ef57 and dea6563f450920c2bf91c3c8c044ce129e7b511f.\n\n</details>\n\n<details>\n<summary>⛔ Files ignored due to path filters (1)</summary>\n\n* `claude/claude-settings.json` is excluded by `!**/*.json`\n\n</details>\n\n<details>\n<summary>📒 Files selected for processing (5)</summary>\n\n* `claude/statusline.sh` (1 hunks)\n* `mk/help.mk` (1 hunks)\n* `mk/install.mk` (3 hunks)\n* `mk/setup.mk` (1 hunks)\n* `mk/variables.mk` (1 hunks)\n\n</details>\n\n<details>\n<summary>🔇 Additional comments (3)</summary><blockquote>\n\n<details>\n<summary>mk/setup.mk (1)</summary><blockquote>\n\n`565-569`: **完了メッセージに新配置(~/.claude)の注意を一言追記**\n\n利用者が旧パス(~/.config/claude)を探さないよう明示しておくと親切です。\n[ suggest_nitpick_refactor ]\n\n```diff\n-    @echo \"✅ Claude設定が完了しました。\"\n+    @echo \"✅ Claude設定が完了しました（保存先は ~/.claude 配下です）。\"\n```\n\n</blockquote></details>\n<details>\n<summary>mk/install.mk (2)</summary><blockquote>\n\n`1387-1388`: **LGTM（エイリアス定義）**\n\n`install-packages-gemini-cli: install-gemini-cli`の橋渡しは妥当です。\n\n---\n\n`1831-1836`: **インデント修正のみで挙動は不変—OK**\n\n視認性が向上しています。機能差分はありません。\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->","state":"CHANGES_REQUESTED","html_url":"https://github.com/yohi/dots/pull/38#pullrequestreview-3237157983","pull_request_url":"https://api.github.com/repos/yohi/dots/pulls/38","author_association":"NONE","_links":{"html":{"href":"https://github.com/yohi/dots/pull/38#pullrequestreview-3237157983"},"pull_request":{"href":"https://api.github.com/repos/yohi/dots/pulls/38"}},"submitted_at":"2025-09-18T03:33:29Z","commit_id":"dea6563f450920c2bf91c3c8c044ce129e7b511f"}]
